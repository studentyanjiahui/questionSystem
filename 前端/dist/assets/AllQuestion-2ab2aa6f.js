import"./index-1c5e6985.js";import{B as U}from"./index-7a16dd82.js";import{N as W}from"./index-8eae4f05.js";import{f as E,g as q,a as n,T as J,t as I,R as L,S as H,I as F,i as Q,e as B,U as K,s as M,V as T,W as z,x as X,X as Y,E as Z,z as G,J as R,n as b,P as p,Y as ee,m as A,d as P,_ as te,Z as ne,r as re,o as S,c as C,$ as ie,a0 as oe,w as k,a1 as ae}from"./index-8c98e848.js";import{u as N}from"./allQuestion-c46a0ff7.js";import{s as ce}from"./function-call-a194e4e5.js";const[le,D]=E("tag"),se={size:String,mark:Boolean,show:I,type:L("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var ue=q({name:le,props:se,emits:["close"],setup(e,{slots:t,emit:s}){const u=a=>{a.stopPropagation(),s("close",a)},d=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},o=()=>{var a;const{type:v,mark:m,plain:l,round:g,size:i,closeable:f}=e,h={mark:m,plain:l,round:g};i&&(h[i]=i);const _=f&&n(F,{name:"cross",class:[D("close"),H],onClick:u},null);return n("span",{style:d(),class:D([h,v])},[(a=t.default)==null?void 0:a.call(t),_])};return()=>n(J,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?o():null]})}});const O=Q(ue),[de,w]=E("image"),me={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:b,height:b,radius:b,lazyLoad:Boolean,iconSize:b,showError:I,errorIcon:L("photo-fail"),iconPrefix:String,showLoading:I,loadingIcon:L("photo")};var ge=q({name:de,props:me,emits:["load","error"],setup(e,{emit:t,slots:s}){const u=B(!1),d=B(!0),o=B(),{$Lazyload:a}=K().proxy,v=M(()=>{const r={width:T(e.width),height:T(e.height)};return z(e.radius)&&(r.overflow="hidden",r.borderRadius=T(e.radius)),r});X(()=>e.src,()=>{u.value=!1,d.value=!0});const m=r=>{d.value&&(d.value=!1,t("load",r))},l=()=>{const r=new Event("load");Object.defineProperty(r,"target",{value:o.value,enumerable:!0}),m(r)},g=r=>{u.value=!0,d.value=!1,t("error",r)},i=(r,y,x)=>x?x():n(F,{name:r,size:e.iconSize,class:y,classPrefix:e.iconPrefix},null),f=()=>{if(d.value&&e.showLoading)return n("div",{class:w("loading")},[i(e.loadingIcon,w("loading-icon"),s.loading)]);if(u.value&&e.showError)return n("div",{class:w("error")},[i(e.errorIcon,w("error-icon"),s.error)])},h=()=>{if(u.value||!e.src)return;const r={alt:e.alt,class:w("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?p(n("img",A({ref:o},r),null),[[ee("lazy"),e.src]]):n("img",A({ref:o,src:e.src,onLoad:m,onError:g},r),null)},_=({el:r})=>{const y=()=>{r===o.value&&d.value&&l()};o.value?y():R(y)},$=({el:r})=>{r===o.value&&!u.value&&g()};return a&&Y&&(a.$on("loaded",_),a.$on("error",$),Z(()=>{a.$off("loaded",_),a.$off("error",$)})),G(()=>{R(()=>{var r;(r=o.value)!=null&&r.complete&&!e.lazyLoad&&l()})}),()=>{var r;return n("div",{class:w({round:e.round,block:e.block}),style:v.value},[h(),f(),(r=s.default)==null?void 0:r.call(s)])}}});const fe=Q(ge),[ve,c]=E("card"),he={tag:String,num:b,desc:String,thumb:String,title:String,price:b,centered:Boolean,lazyLoad:Boolean,currency:L("¥"),thumbLink:String,originPrice:b};var _e=q({name:ve,props:he,emits:["clickThumb"],setup(e,{slots:t,emit:s}){const u=()=>{if(t.title)return t.title();if(e.title)return n("div",{class:[c("title"),"van-multi-ellipsis--l2"]},[e.title])},d=()=>{if(t.tag||e.tag)return n("div",{class:c("tag")},[t.tag?t.tag():n(O,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},o=()=>t.thumb?t.thumb():n(fe,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),a=()=>{if(t.thumb||e.thumb)return n("a",{href:e.thumbLink,class:c("thumb"),onClick:l=>s("clickThumb",l)},[o(),d()])},v=()=>{if(t.desc)return t.desc();if(e.desc)return n("div",{class:[c("desc"),"van-ellipsis"]},[e.desc])},m=()=>{const l=e.price.toString().split(".");return n("div",null,[n("span",{class:c("price-currency")},[e.currency]),n("span",{class:c("price-integer")},[l[0]]),P("."),n("span",{class:c("price-decimal")},[l[1]])])};return()=>{var l,g,i;const f=t.num||z(e.num),h=t.price||z(e.price),_=t["origin-price"]||z(e.originPrice),$=f||h||_||t.bottom,r=h&&n("div",{class:c("price")},[t.price?t.price():m()]),y=_&&n("div",{class:c("origin-price")},[t["origin-price"]?t["origin-price"]():`${e.currency} ${e.originPrice}`]),x=f&&n("div",{class:c("num")},[t.num?t.num():`x${e.num}`]),V=t.footer&&n("div",{class:c("footer")},[t.footer()]),j=$&&n("div",{class:c("bottom")},[(l=t["price-top"])==null?void 0:l.call(t),r,y,x,(g=t.bottom)==null?void 0:g.call(t)]);return n("div",{class:c()},[n("div",{class:c("header")},[a(),n("div",{class:c("content",{centered:e.centered})},[n("div",null,[u(),v(),(i=t.tags)==null?void 0:i.call(t)]),j])]),V])}}});const be=Q(_e);const ye={name:"AllQuestion",setup(){const e=N();return console.log(e.questionList),{questionStore:e,questions:e.questionList}},computed:{...ne(N)},methods:{checkResult(e,t){this.questionStore.getAnalyzes(e),this.questionStore.nowTitle=t,this.$router.push("analyzeJuan")},WriteQues(e,t){this.questionStore.getOneQues(e),this.questionStore.nowTitle=t,this.$router.push("seeQues")},delRecord(e,t){this.$http.post("/naires/del",{id:e,title:t}).then(s=>{ce({message:"操作成功",forbidClick:!1}),console.log(s.data),window.location.reload()}).catch(s=>{console.log(s)})}}},ke={key:0},we={key:1};function Se(e,t,s,u,d,o){const a=W,v=O,m=U,l=be,g=re("router-view");return S(),C("main",null,[n(a,{title:"问卷总览","right-text":"新建问卷",onClickRight:t[0]||(t[0]=i=>{this.$router.push("/homeView/CreateQues")})}),u.questions.length===0?(S(),C("div",ke,"当前暂无问卷")):(S(),C("div",we,[(S(!0),C(ie,null,oe(u.questions,i=>(S(),C("p",{key:i.id},[n(l,{style:{"margin-bottom":"10px"},title:i.title,desc:i.description},{tags:k(()=>[n(v,{plain:"",type:"primary"},{default:k(()=>[P("问卷编号为"+ae(i.id),1)]),_:2},1024)]),footer:k(()=>[n(m,{size:"mini",onClick:f=>o.delRecord(i.id,i.title)},{default:k(()=>[P(" 删除问卷")]),_:2},1032,["onClick"]),n(m,{size:"mini",onClick:f=>o.WriteQues(i.id,i.title)},{default:k(()=>[P(" 填写问卷")]),_:2},1032,["onClick"]),n(m,{size:"mini",onClick:f=>o.checkResult(i.id,i.title)},{default:k(()=>[P(" 查看问卷调查结果")]),_:2},1032,["onClick"])]),_:2},1032,["title","desc"])]))),128))])),n(g)])}const Be=te(ye,[["render",Se]]);export{Be as default};
