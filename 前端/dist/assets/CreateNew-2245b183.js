import"./index-1c5e6985.js";import{u as te,C as j,F as le,a as ae}from"./index-a0d7864c.js";import{S as ne}from"./index-c7c7423e.js";import{B as se}from"./index-7a16dd82.js";import{N as ie}from"./index-8eae4f05.js";import{u as ue}from"./createNew-cc73ce5e.js";import{f as H,g as Q,e as I,h as re,a2 as de,s as A,v as x,a3 as G,F as X,a as e,t as D,n as R,G as Y,R as ce,W as F,a4 as Z,L as pe,S as fe,p as J,l as me,a5 as ve,a6 as _e,k as K,a7 as he,P as Ce,Q as ye,a8 as ke,m as ge,I as Ve,i as M,q as we,N as be,O as $e,a9 as Pe,_ as Se,r as Ue,o as k,c as g,b as Oe,w as l,d as f,a1 as qe,aa as v,$ as Te,a0 as Le,ab as S,ac as Ee,ad as Ie}from"./index-8c98e848.js";import{u as We}from"./allQuestion-c46a0ff7.js";import{a as Ne,b as Be}from"./function-call-a194e4e5.js";const[ee,N]=H("dropdown-menu"),De={overlay:D,zIndex:R,duration:Y(.2),direction:ce("down"),activeColor:String,closeOnClickOutside:D,closeOnClickOverlay:D},oe=Symbol(ee);var Ae=Q({name:ee,props:De,setup(d,{slots:p}){const V=te(),h=I(),a=I(),y=I(0),{children:w,linkChildren:$}=re(oe),O=de(h),_=A(()=>w.some(n=>n.state.showWrapper)),P=A(()=>{if(_.value&&F(d.zIndex))return{zIndex:+d.zIndex+1}}),U=()=>{w.forEach(n=>{n.toggle(!1)})},q=()=>{d.closeOnClickOutside&&U()},i=()=>{if(a.value){const n=Z(a);d.direction==="down"?y.value=n.bottom:y.value=pe.value-n.top}},T=()=>{_.value&&i()},L=n=>{w.forEach((c,s)=>{s===n?c.toggle():c.state.showPopup&&c.toggle(!1,{immediate:!0})})},E=(n,c)=>{const{showPopup:s}=n.state,{disabled:m,titleClass:b}=n;return e("div",{id:`${V}-${c}`,role:"button",tabindex:m?void 0:0,class:[N("item",{disabled:m}),{[fe]:!m}],onClick:()=>{m||L(c)}},[e("span",{class:[N("title",{down:s===(d.direction==="down"),active:s}),b],style:{color:s?d.activeColor:""}},[e("div",{class:"van-ellipsis"},[n.renderTitle()])])])};return x({close:U}),$({id:V,props:d,offset:y,updateOffset:i}),G(h,q),X("scroll",T,{target:O,passive:!0}),()=>{var n;return e("div",{ref:h,class:N()},[e("div",{ref:a,style:P.value,class:N("bar",{opened:_.value})},[w.map(E)]),(n=p.default)==null?void 0:n.call(p)])}}});const[ze,B]=H("dropdown-item"),Re={title:String,options:_e(),disabled:Boolean,teleport:[String,Object],lazyRender:D,modelValue:K,titleClass:K};var Fe=Q({name:ze,inheritAttrs:!1,props:Re,emits:["open","opened","close","closed","change","update:modelValue"],setup(d,{emit:p,slots:V,attrs:h}){const a=J({showPopup:!1,transition:!0,showWrapper:!1}),{parent:y,index:w}=me(oe);if(!y)return;const $=n=>()=>p(n),O=$("open"),_=$("close"),P=$("opened"),U=()=>{a.showWrapper=!1,p("closed")},q=n=>{d.teleport&&n.stopPropagation()},i=(n=!a.showPopup,c={})=>{n!==a.showPopup&&(a.showPopup=n,a.transition=!c.immediate,n&&(y.updateOffset(),a.showWrapper=!0))},T=()=>{if(V.title)return V.title();if(d.title)return d.title;const n=d.options.find(c=>c.value===d.modelValue);return n?n.text:""},L=n=>{const{activeColor:c}=y.props,s=n.value===d.modelValue,m=()=>{a.showPopup=!1,n.value!==d.modelValue&&(p("update:modelValue",n.value),p("change",n.value))},b=()=>{if(s)return e(Ve,{class:B("icon"),color:c,name:"success"},null)};return e(j,{role:"menuitem",key:n.value,icon:n.icon,title:n.text,class:B("option",{active:s}),style:{color:s?c:""},tabindex:s?0:-1,clickable:!0,onClick:m},{value:b})},E=()=>{const{offset:n}=y,{zIndex:c,overlay:s,duration:m,direction:b,closeOnClickOverlay:W}=y.props,u=he(c);return b==="down"?u.top=`${n.value}px`:u.bottom=`${n.value}px`,Ce(e("div",ge({style:u,class:B([b]),onClick:q},h),[e(ke,{show:a.showPopup,"onUpdate:show":C=>a.showPopup=C,role:"menu",class:B("content"),overlay:s,position:b==="down"?"top":"bottom",duration:a.transition?m:0,lazyRender:d.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${y.id}-${w.value}`,closeOnClickOverlay:W,onOpen:O,onClose:_,onOpened:P,onClosed:U},{default:()=>{var C;return[d.options.map(L),(C=V.default)==null?void 0:C.call(V)]}})]),[[ye,a.showWrapper]])};return x({state:a,toggle:i,renderTitle:T}),()=>d.teleport?e(ve,{to:d.teleport},{default:()=>[E()]}):E()}});const He=M(Fe),Qe=M(Ae),[xe,z]=H("swipe-cell"),Me={name:Y(""),disabled:Boolean,leftWidth:R,rightWidth:R,beforeClose:Function,stopPropagation:Boolean};var Ke=Q({name:xe,props:Me,emits:["open","close","click"],setup(d,{emit:p,slots:V}){let h,a,y;const w=I(),$=I(),O=I(),_=J({offset:0,dragging:!1}),P=we(),U=u=>u.value?Z(u).width:0,q=A(()=>F(d.leftWidth)?+d.leftWidth:U($)),i=A(()=>F(d.rightWidth)?+d.rightWidth:U(O)),T=u=>{_.offset=u==="left"?q.value:-i.value,h||(h=!0,p("open",{name:d.name,position:u}))},L=u=>{_.offset=0,h&&(h=!1,p("close",{name:d.name,position:u}))},E=u=>{const C=Math.abs(_.offset),o=.15,r=h?1-o:o,t=u==="left"?q.value:i.value;t&&C>t*r?T(u):L(u)},n=u=>{d.disabled||(y=_.offset,P.start(u))},c=u=>{if(d.disabled)return;const{deltaX:C}=P;P.move(u),P.isHorizontal()&&(a=!0,_.dragging=!0,(!h||C.value*y<0)&&be(u,d.stopPropagation),_.offset=$e(C.value+y,-i.value,q.value))},s=()=>{_.dragging&&(_.dragging=!1,E(_.offset>0?"left":"right"),setTimeout(()=>{a=!1},0))},m=(u="outside")=>{p("click",u),h&&!a&&Pe(d.beforeClose,{args:[{name:d.name,position:u}],done:()=>L(u)})},b=(u,C)=>o=>{C&&o.stopPropagation(),m(u)},W=(u,C)=>{const o=V[u];if(o)return e("div",{ref:C,class:z(u),onClick:b(u,!0)},[o()])};return x({open:T,close:L}),G(w,()=>m("outside"),{eventName:"touchstart"}),X("touchmove",c,{target:w}),()=>{var u;const C={transform:`translate3d(${_.offset}px, 0, 0)`,transitionDuration:_.dragging?"0s":".6s"};return e("div",{ref:w,class:z(),onClick:b("cell",a),onTouchstartPassive:n,onTouchend:s,onTouchcancel:s},[e("div",{class:z("wrapper"),style:C},[W("left",$),(u=V.default)==null?void 0:u.call(V),W("right",O)])])}}});const je=M(Ke);const Ge={key:0},Xe={key:0},Ye={key:1},Ze={key:2},Je={key:3},eo={key:4},oo={key:1},to={key:0},lo={key:1},ao={key:2},no={key:3},so={key:4},io={key:2},uo={__name:"CreateNew",setup(d){const p=ue(),V=[{text:"单选题",value:0},{text:"多选题",value:1},{text:"简答题",value:2}],h=I(0);let a=[];for(let i=0;i<300;i++)a.push({option1:!1,option2:!1,option3:!1,option4:!1,option5:!1});function y(){const i=h.value;p.addQues(i)}function w(i){p.quesList[i].option2===null?p.quesList[i].option2="":p.quesList[i].option3===null?p.quesList[i].option3="":p.quesList[i].option4===null?p.quesList[i].option4="":p.quesList[i].option5===null?p.quesList[i].option5="":confirm("已达选项个数上限，不能再添加选项了")}function $(i){p.delQues(i)}function O(i){p.quesList[i].option2=null}function _(i){p.quesList[i].option3=null}function P(i){p.quesList[i].option4=null}function U(i){p.quesList[i].option5=null}function q(){Ee.post("naires/createNew",p.quesList).then(i=>{console.log(i.data),Ne({message:"问卷添加成功，请返回查看",forbidClick:!1}),We().getAllQues(),Ie.replace("AllQuestion")}).catch(i=>{console.log(i),Be({message:"问卷添加失败，请检查网络",forbidClick:!0})})}return(i,T)=>{const L=ie,E=Ue("router-view"),n=j,c=ae,s=se,m=je,b=ne,W=He,u=Qe,C=le;return k(),g("main",null,[Oe("div",null,[e(L,{title:"简易问卷调查系统"}),e(E),e(n,{title:"对新建问卷进行修改，当前问卷编号："},{default:l(()=>[f(qe(v(p).id),1)]),_:1}),e(C,null,{default:l(()=>[(k(!0),g(Te,null,Le(v(p).quesList,(o,r)=>(k(),g("div",{key:o.num},[o.type===0?(k(),g("div",Ge,[e(c,{type:"text",label:"单选题",placeholder:"请输入问题",modelValue:o.question,"onUpdate:modelValue":t=>o.question=t},null,8,["modelValue","onUpdate:modelValue"]),o.option1!==null?(k(),g("div",Xe,[e(m,null,{right:l(()=>[e(s,{class:"item2",onClick:t=>v(a)[r].option1=!0},{default:l(()=>[f("确定")]),_:2},1032,["onClick"])]),default:l(()=>[e(c,{type:"text",label:"A选项",placeholder:"请输入A选项的值",readonly:v(a)[r].option1,modelValue:o.option1,"onUpdate:modelValue":t=>o.option1=t},null,8,["readonly","modelValue","onUpdate:modelValue"])]),_:2},1024)])):S("",!0),o.option2!==null?(k(),g("div",Ye,[e(m,null,{right:l(()=>[e(s,{class:"item1",onClick:t=>O(r)},{default:l(()=>[f("删除")]),_:2},1032,["onClick"]),e(s,{class:"item2",onClick:t=>v(a)[r].option2=!0},{default:l(()=>[f("确定")]),_:2},1032,["onClick"])]),default:l(()=>[e(c,{type:"text",label:"B选项",placeholder:"请输入B选项的值",readonly:v(a)[r].option2,modelValue:o.option2,"onUpdate:modelValue":t=>o.option2=t},null,8,["readonly","modelValue","onUpdate:modelValue"])]),_:2},1024)])):S("",!0),o.option3!==null?(k(),g("div",Ze,[e(m,null,{right:l(()=>[e(s,{class:"item1",onClick:t=>_(r)},{default:l(()=>[f("删除")]),_:2},1032,["onClick"]),e(s,{class:"item2",onClick:t=>v(a)[r].option3=!0},{default:l(()=>[f("确定")]),_:2},1032,["onClick"])]),default:l(()=>[e(c,{type:"text",label:"C选项",placeholder:"请输入C选项的值",readonly:v(a)[r].option3,modelValue:o.option3,"onUpdate:modelValue":t=>o.option3=t},null,8,["readonly","modelValue","onUpdate:modelValue"])]),_:2},1024)])):S("",!0),o.option4!==null?(k(),g("div",Je,[e(m,null,{right:l(()=>[e(s,{class:"item1",onClick:t=>P(r)},{default:l(()=>[f("删除")]),_:2},1032,["onClick"]),e(s,{class:"item2",onClick:t=>v(a)[r].option4=!0},{default:l(()=>[f("确定")]),_:2},1032,["onClick"])]),default:l(()=>[e(c,{type:"text",label:"D选项",placeholder:"请输入D选项的值",readonly:v(a)[r].option4,modelValue:o.option4,"onUpdate:modelValue":t=>o.option4=t},null,8,["readonly","modelValue","onUpdate:modelValue"])]),_:2},1024)])):S("",!0),o.option5!==null?(k(),g("div",eo,[e(m,null,{right:l(()=>[e(s,{class:"item1",onClick:t=>U(r)},{default:l(()=>[f("删除")]),_:2},1032,["onClick"]),e(s,{class:"item2",onClick:t=>v(a)[r].option5=!0},{default:l(()=>[f("确定")]),_:2},1032,["onClick"])]),default:l(()=>[e(c,{type:"text",label:"E选项",placeholder:"请输入E选项的值",readonly:v(a)[r].option5,modelValue:o.option5,"onUpdate:modelValue":t=>o.option5=t},null,8,["readonly","modelValue","onUpdate:modelValue"])]),_:2},1024)])):S("",!0),e(b,{size:"2rem"},{default:l(()=>[e(s,{onClick:t=>w(r),type:"primary"},{default:l(()=>[f("继续添加选项")]),_:2},1032,["onClick"]),e(s,{onClick:t=>$(r),class:"van-row--align-center",type:"primary"},{default:l(()=>[f("删除本题")]),_:2},1032,["onClick"])]),_:2},1024)])):o.type===1?(k(),g("div",oo,[e(c,{type:"text",label:"多选题",placeholder:"请输入问题",modelValue:o.question,"onUpdate:modelValue":t=>o.question=t},null,8,["modelValue","onUpdate:modelValue"]),o.option1!==null?(k(),g("div",to,[e(m,null,{right:l(()=>[e(s,{class:"item2",onClick:t=>v(a)[r].option1=!0},{default:l(()=>[f("确定")]),_:2},1032,["onClick"])]),default:l(()=>[e(c,{type:"text",label:"A选项",placeholder:"请输入A选项的值",readonly:v(a)[r].option1,modelValue:o.option1,"onUpdate:modelValue":t=>o.option1=t},null,8,["readonly","modelValue","onUpdate:modelValue"])]),_:2},1024)])):S("",!0),o.option2!==null?(k(),g("div",lo,[e(m,null,{right:l(()=>[e(s,{class:"item1",onClick:t=>O(r)},{default:l(()=>[f("删除")]),_:2},1032,["onClick"]),e(s,{class:"item2",onClick:t=>v(a)[r].option2=!0},{default:l(()=>[f("确定")]),_:2},1032,["onClick"])]),default:l(()=>[e(c,{type:"text",label:"B选项",placeholder:"请输入B选项的值",readonly:v(a)[r].option2,modelValue:o.option2,"onUpdate:modelValue":t=>o.option2=t},null,8,["readonly","modelValue","onUpdate:modelValue"])]),_:2},1024)])):S("",!0),o.option3!==null?(k(),g("div",ao,[e(m,null,{right:l(()=>[e(s,{class:"item1",onClick:t=>_(r)},{default:l(()=>[f("删除")]),_:2},1032,["onClick"]),e(s,{class:"item2",onClick:t=>v(a)[r].option3=!0},{default:l(()=>[f("确定")]),_:2},1032,["onClick"])]),default:l(()=>[e(c,{type:"text",label:"C选项",placeholder:"请输入C选项的值",readonly:v(a)[r].option3,modelValue:o.option3,"onUpdate:modelValue":t=>o.option3=t},null,8,["readonly","modelValue","onUpdate:modelValue"])]),_:2},1024)])):S("",!0),o.option4!==null?(k(),g("div",no,[e(m,null,{right:l(()=>[e(s,{class:"item1",onClick:t=>P(r)},{default:l(()=>[f("删除")]),_:2},1032,["onClick"]),e(s,{class:"item2",onClick:t=>v(a)[r].option4=!0},{default:l(()=>[f("确定")]),_:2},1032,["onClick"])]),default:l(()=>[e(c,{type:"text",label:"D选项",placeholder:"请输入D选项的值",readonly:v(a)[r].option4,modelValue:o.option4,"onUpdate:modelValue":t=>o.option4=t},null,8,["readonly","modelValue","onUpdate:modelValue"])]),_:2},1024)])):S("",!0),o.option5!==null?(k(),g("div",so,[e(m,null,{right:l(()=>[e(s,{class:"item1",onClick:t=>U(r)},{default:l(()=>[f("删除")]),_:2},1032,["onClick"]),e(s,{class:"item2",onClick:t=>v(a)[r].option5=!0},{default:l(()=>[f("确定")]),_:2},1032,["onClick"])]),default:l(()=>[e(c,{type:"text",label:"E选项",placeholder:"请输入E选项的值",readonly:v(a)[r].option5,modelValue:o.option5,"onUpdate:modelValue":t=>o.option5=t},null,8,["readonly","modelValue","onUpdate:modelValue"])]),_:2},1024)])):S("",!0),e(b,{size:"2rem"},{default:l(()=>[e(s,{onClick:t=>w(r),type:"primary"},{default:l(()=>[f("继续添加选项")]),_:2},1032,["onClick"]),e(s,{onClick:t=>$(r),class:"van-row--align-center",type:"primary"},{default:l(()=>[f("删除本题")]),_:2},1032,["onClick"])]),_:2},1024)])):o.type===2?(k(),g("div",io,[e(c,{type:"text",label:"简答题",placeholder:"请输入题目",modelValue:o.question,"onUpdate:modelValue":t=>o.question=t},null,8,["modelValue","onUpdate:modelValue"]),e(c,{type:"textarea",placeholder:"请输入您的回答",disabled:!0}),e(s,{onClick:t=>$(r),class:"van-row--align-center",type:"primary"},{default:l(()=>[f("删除本题")]),_:2},1032,["onClick"])])):S("",!0)]))),128)),e(u,{class:"toCenter"},{default:l(()=>[e(W,{modelValue:h.value,"onUpdate:modelValue":T[0]||(T[0]=o=>h.value=o),options:V},null,8,["modelValue"]),e(s,{onClick:y},{default:l(()=>[f("确认添加")]),_:1})]),_:1}),e(s,{type:"primary","navie-type":"submit",onClick:q},{default:l(()=>[f("提交问卷")]),_:1})]),_:1})]),e(E)])}}},yo=Se(uo,[["__scopeId","data-v-d8db29a8"]]);export{yo as default};
