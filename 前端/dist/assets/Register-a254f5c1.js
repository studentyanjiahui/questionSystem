import"./index-1c5e6985.js";import{B as b}from"./index-7a16dd82.js";import{F as h,a as F}from"./index-a0d7864c.js";import{N as _}from"./index-8eae4f05.js";import{_ as k,r as w,o as C,c as V,a as t,w as l,b as v,d as p}from"./index-8c98e848.js";import{s}from"./function-call-a194e4e5.js";const y={name:"Register",methods:{onClickLeft(){history.back()},onClickRight(){this.$router.push("/")},submitRegister(){const n=/^1[0-9]{10}$/,o=/^([a-zA-Z~_-][a-z0-9A-Z@-_~]*)|([U4e00-u9fa5]+[a-z0-9A-Z@-_~]*)$/,m=/^([0-9a-zA-Z_-].*)$/;if(this.registerForm.name=="")return s({message:"请输入用户名",forbidClick:!1,position:"bottom"}),!1;if(o.test(this.registerForm.name)){if(this.registerForm.password=="")return s({message:"请输入新账户的密码",forbidClick:!1,position:"bottom"}),!1;if(this.registerForm.password!==this.registerForm.confirmPswd)return s({message:"请输入用户名",forbidClick:!1,position:"bottom"}),!1;if(m.test(this.registerForm.password)){if(this.registerForm.phone=="")return s({message:"请输入注册所用手机号",forbidClick:!1,position:"bottom"}),!1;if(!n.test(this.registerForm.phone))return s({message:"输入的手机号不符合规格",forbidClick:!1,position:"bottom"}),!1}else return s({message:"请输入用户名",forbidClick:!1,position:"bottom"}),!1}else return s({message:"输入的用户名不符合规范",forbidClick:!1,position:"bottom"}),!1;const e={name:"",password:""};e.name=this.registerForm.name,e.password=this.registerForm.password,this.$http.post("address/register",e).then(d=>(s({message:"注册成功，请登录",forbidClick:!1,position:"bottom"}),this.$router.push("/"),!0)).catch(d=>{s({message:"用户名已存在或网络错误，请稍后再试",icon:"like-o",forbidClick:!1,position:"bottom"}),location.reload()})}},setup(){return{registerForm:{name:"",password:"",confirmPswd:"",phone:""}}}},x={style:{margin:"16px"}};function R(n,o,m,e,d,a){const u=_,g=w("router-view"),i=F,f=b,c=h;return C(),V("div",null,[t(u,{title:"简易问卷调查系统","left-text":"退出",onClickLeft:a.onClickLeft,"right-text":"返回登录",onClickRight:a.onClickRight},null,8,["onClickLeft","onClickRight"]),t(g),t(c,{onSubmit:a.submitRegister,modelValue:e.registerForm,"onUpdate:modelValue":o[4]||(o[4]=r=>e.registerForm=r)},{default:l(()=>[t(i,{modelValue:e.registerForm.name,"onUpdate:modelValue":o[0]||(o[0]=r=>e.registerForm.name=r),name:"用户名",label:"注册用户名",placeholder:"请输入注册所用的用户名"},null,8,["modelValue"]),t(i,{modelValue:e.registerForm.password,"onUpdate:modelValue":o[1]||(o[1]=r=>e.registerForm.password=r),type:"password",name:"密码",label:"注册密码",placeholder:"请输入注册所用的密码"},null,8,["modelValue"]),t(i,{modelValue:e.registerForm.confirmPswd,"onUpdate:modelValue":o[2]||(o[2]=r=>e.registerForm.confirmPswd=r),type:"password",name:"确认密码",label:"确认注册密码",placeholder:"请确认您输入的密码"},null,8,["modelValue"]),t(i,{modelValue:e.registerForm.phone,"onUpdate:modelValue":o[3]||(o[3]=r=>e.registerForm.phone=r),name:"手机",label:"验证手机号"},null,8,["modelValue"]),v("div",x,[t(f,{size:"normal",type:"primary","native-type":"submit"},{default:l(()=>[p(" 提交 ")]),_:1}),t(f,{size:"normal",type:"default","native-type":"reset"},{default:l(()=>[p(" 内容重置 ")]),_:1})])]),_:1},8,["onSubmit","modelValue"])])}const L=k(y,[["render",R]]);export{L as default};
